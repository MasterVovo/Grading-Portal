<!DOCTYPE html>
<html class="no-js" lang="">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Archived Faculty - Admin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="apple-touch-icon" href="https://i.imgur.com/QRAUqs9.png" />
    <link rel="shortcut icon" href="../assets/img/student-grade.png" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.0/normalize.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/lykmapipo/themify-icons@0.1.2/css/themify-icons.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/pixeden-stroke-7-icon@1.2.3/pe-icon-7-stroke/dist/pe-icon-7-stroke.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.0/css/flag-icon.min.css"
    />
    <link rel="stylesheet" href="../styles/cs-skin-elastic.css" />
    <link
      rel="stylesheet"
      href="../styles/lib/datatable/dataTables.bootstrap.min.css"
    />
    <link rel="stylesheet" href="../styles/style2.css" />
    <link
      rel="shortcut icon"
      href="../images/KLD LOGO.png"
      type="image/x-icon"
    />

    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800"
      rel="stylesheet"
      type="text/css"
    />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <body>
    <!-- Left Panel -->
    <aside id="left-panel" class="left-panel"></aside>

    <!-- /#left-panel -->

    <!-- Left Panel -->

    <!-- Right Panel -->

    <div id="right-panel" class="right-panel">
      <!-- Header-->
      <header id="header" class="header">
        <div class="top-left">
          <div class="navbar-header">
            <a class="navbar-brand" href="./">Student Grading System</a>
            <a id="menuToggle" class="menutoggle"><i class="fa fa-bars"></i></a>
          </div>
        </div>
        <div class="top-right">
          <div class="header-menu">
            <div class="header-left">
              <div class="form-inline">
                <form class="search-form">
                  <input
                    class="form-control mr-sm-2"
                    type="text"
                    placeholder="Search ..."
                    aria-label="Search"
                  />
                  <button class="search-close" type="submit">
                    <i class="fa fa-close"></i>
                  </button>
                </form>
              </div>

              <div class="user-area dropdown float-right">
                <a
                  href="#"
                  class="dropdown-toggle active"
                  data-toggle="dropdown"
                  aria-haspopup="true"
                  aria-expanded="false"
                >
                  <img
                    class="user-avatar rounded-circle"
                    src="../assets/img/admin-icn.png"
                    alt="User Avatar"
                  />
                </a>

                <div class="user-menu dropdown-menu">
                  <a class="nav-link" href="updateProfile.php"
                    ><i class="fa fa-user"></i>My Profile</a
                  >
                  <a class="nav-link" href="logout.html"
                    ><i class="fa fa-power-off"></i>Logout</a
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </header>

      <script src="../assets/js/main.js"></script>
      <!-- /header -->
      <!-- Header-->

      <div class="breadcrumbs">
        <div class="breadcrumbs-inner">
          <div class="row m-0">
            <div class="col-sm-4">
              <div class="page-header float-left">
                <div class="page-title">
                  <h1>Dashboard</h1>
                </div>
              </div>
            </div>
            <div class="col-sm-8">
              <div class="page-header float-right">
                <div class="page-title">
                  <ol class="breadcrumb text-right">
                    <li><a href="#">Dashboard</a></li>
                    <li><a href="#">Faculty</a></li>
                    <li class="active">Add Faculty</li>
                  </ol>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="animated fadeIn">
          
          <div class="row">
            <div class="col-md-12">
              <!-- Modal -->
              <div class="modal fade" id="editFacultyModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">Faculty Data</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <form method="Post" action="#" id="edit-faculty">
                        <div class="row">
                          <div class="col-6">
                            <div class="form-group">
                              <label for="edit-fct-id" class="control-label mb-1">Faculty ID <span class="red">*</span></label>
                              <input
                                id="edit-fct-id"
                                name="fct-id"
                                type="text"
                                class="form-control cc-exp"
                                value=""
                                required
                                disabled
                                placeholder="Faculty ID"
                              />
                            </div>
                          </div>
                          <div class="col-6">
                            <div class="form-group">
                              <label for="edit-fname" class="control-label mb-1">First name <span class="red">*</span></label>
                              <input
                                id="edit-fname"
                                name="fname"
                                type="text"
                                class="form-control cc-exp"
                                value=""
                                required
                                disabled
                                placeholder="First name"
                              />
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-6">
                            <div class="form-group">
                              <label for="edit-mname" class="control-label mb-1">Middle name</label>
                              <input
                                id="edit-mname"
                                name="mname"
                                type="text"
                                class="form-control cc-exp"
                                value=""
                                disabled
                                placeholder="Middle name"
                              />
                            </div>
                          </div>
                          <div class="col-6">
                            <div class="form-group">
                              <label for="edit-lname" class="control-label mb-1">Last name <span class="red">*</span></label>
                              <input
                                id="edit-lname"
                                name="lname"
                                type="text"
                                class="form-control cc-exp"
                                value=""
                                required
                                disabled
                                placeholder="Last name"
                              />
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-6">
                            <div class="form-group">
                              <label for="edit-email" class="control-label mb-1">Email <span class="red">*</span></label>
                              <input
                                id="edit-email"
                                name="email"
                                type="email"
                                class="form-control cc-exp"
                                value=""
                                required
                                disabled
                                placeholder="Email"
                              />
                            </div>
                          </div>
                          <div class="col-6">
                            <div class="form-group">
                              <label for="edit-pass" class="control-label mb-1">Password <span class="red">*</span></label>
                              <input
                                id="edit-pass"
                                name="pass"
                                type="password"
                                class="form-control cc-exp"
                                value=""
                                required
                                disabled
                                placeholder="Password"
                              />
                            </div>
                          </div>
                        </div>
                      </form>

                      <form action="" id="set-assign">
                        <h2 class="h5 mt-2">Assign New Section and Course</h2>
                        
                        <div class="row">
                          <div class="col-6">
                            <div class="form-group">
                              <label for="sect" class="control-label mb-1">Section</label>
                              <select required id="sect" name="sect" class="custom-select form-control">
                                <option value="" disabled selected>--Select Section--</option>
                              </select>
                            </div>
                          </div>

                          <div class="col-6">
                            <div class="form-group">
                              <label for="crs" class="control-label mb-1">Course</label>
                              <select required id="crs" name="crs" class="custom-select form-control">
                                <option value="" disabled selected>--Select Course--</option>
                              </select>
                            </div>
                          </div>
                        </div>

                        <button type="submit" name="submit" class="btn btn-success" onclick="setAssignment()">Assign</button>
                      </form>
                      
                      <div class="card shadow-lg">
                        <div class="card-header">
                          <h2 align="center" class="h5">Section & Subject Assignment</h2>
                        </div>
                        <div class="card-body">
                          <table id="assignment-table" class="table table-hover table-striped table-bordered">
                            <thead>
                              <tr>
                                <th>Section</th>
                                <th>Course</th>
                                <th>Actions</th>
                              </tr>
                            </thead>
                            <tbody id="ass-table">
                          
                            </tbody>
                          </table>
                        </div>
                      </div>
                      
                      
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                      <button type="button" class="btn btn-success">Save changes</button>
                    </div>
                  </div>
                </div>
              </div>
              <!-- /Modal -->


              <div class="card">
                <div class="card-header">
                  <strong class="card-title">
                    <h2 align="center">Archived Faculty</h2>
                  </strong>
                </div>
                <div class="card-body">
                  <table id="faculty-table" class="table table-hover table-striped table-bordered">
                    <thead>
                      <tr>
                        <th>#</th>
                        <th>First Name</th>
                        <th>Middle Name</th>
                        <th>Last Name</th>
                        <th>Email</th>
                        <th>Actions</th>
                      </tr>
                    </thead>
                    <tbody id="fct-list-tbl">

                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            <!-- end of datatable -->
          </div>
        </div>
        <!-- .animated -->
      </div>
      <!-- .content -->

      <div class="clearfix"></div>

      <!-- Footer -->
      <footer class="site-footer">
        <div class="footer-inner bg-white">
          <div class="row">
            <div class="col-sm-6">&copy; 2024 Student Grading System</div>
            <div class="col-sm-6 text-right"></div>
          </div>
        </div>
      </footer>
      <!-- /.site-footer -->
    </div>
    <!-- /#right-panel -->

    <!-- Right Panel -->

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@2.2.4/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.4/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-match-height@0.7.2/dist/jquery.matchHeight.min.js"></script>
    <script src="../assets/js/main.js"></script>
    <script src="../assets/js/lib/data-table/datatables.min.js"></script>
    <script src="../assets/js/lib/data-table/dataTables.bootstrap.min.js"></script>
    <script src="../assets/js/lib/data-table/dataTables.buttons.min.js"></script>
    <script src="../assets/js/lib/data-table/buttons.bootstrap.min.js"></script>
    <script src="../assets/js/lib/data-table/jszip.min.js"></script>
    <script src="../assets/js/lib/data-table/vfs_fonts.js"></script>
    <script src="../assets/js/lib/data-table/buttons.html5.min.js"></script>
    <script src="../assets/js/lib/data-table/buttons.print.min.js"></script>
    <script src="../assets/js/lib/data-table/buttons.colVis.min.js"></script>
    <script src="../assets/js/init/datatables-init.js"></script>

    <!-- Script for adding separate html -->
    <script>
      fetch("includes/leftnav.html")
        .then((response) => response.text())
        .then((data) => {
          document.querySelector("#left-panel").innerHTML = data;
        });
    </script>

    <script type="text/javascript">
      // Menu Trigger
      $("#menuToggle").on("click", function (event) {
        var windowWidth = $(window).width();
        if (windowWidth < 1010) {
          $("body").removeClass("open");
          if (windowWidth < 760) {
            $("#left-panel").slideToggle();
          } else {
            $("#left-panel").toggleClass("open-menu");
          }
        } else {
          $("body").toggleClass("open");
          $("#left-panel").removeClass("open-menu");
        }
      });

      // Populating the edit fields
      let assignmentDataTable = $("#assignment-table").DataTable();
      function populateEditFields() {
        event.preventDefault();
        const facultyID = event.currentTarget.getAttribute('data-id');
        
        const formData = new FormData();
        formData.append('method', 'getFct');
        formData.append('facultyID', facultyID);

        fetch('../../src/controller/getFctList.php', {
          method: 'POST',
          body: formData
        })
        .then(response => response.json())
        .then(data => {
          console.log(data[0]);
          document.querySelector('#edit-fct-id').value = data[0].facultyID;
          document.querySelector('#edit-fname').value = data[0].facultyFName;
          document.querySelector('#edit-mname').value = data[0].facultyMName;
          document.querySelector('#edit-lname').value = data[0].facultyLName;
          document.querySelector('#edit-email').value = data[0].facultyEmail;
          document.querySelector('#edit-pass').value = data[0].facultyPass;
        })
        .catch(error => console.error(error));


        fetch('../../src/controller/getAssignment.php', {
          method: 'POST',
          body: (() => {
            const formData = new FormData();
            formData.append('method', 'getAssignmentByFct');
            formData.append('facultyID', facultyID);
            return formData;
          })()
        })
        .then(response => response.json())
        .then(data => {
          console.log(data);
          assignmentDataTable.destroy();
          document.querySelector('#ass-table').innerHTML = '';
          data.forEach((item) => {
            document.querySelector('#ass-table').innerHTML += `
              <tr>
                <th>${item.sectionID}</th>
                <td>${item.courseID}</td>
                <td>
                    <a onclick="return confirm('Are you sure you want to delete?')" href="deleteStudent.php?delid=<?php echo $row['matricNo'];?>" title="Delete Student Details"><i class="fa fa-trash fa-1x"></i></a>
                </td>
              </tr>
            `;
          });
          assignmentDataTable = $("#assignment-table").DataTable();
        })
        .catch(error => console.error(error));
      }
    </script>

    <script defer>
      $(document).ready(function () {
        $("#bootstrap-data-table").DataTable();
        $("#faculty-table").DataTable();
      });
    </script>
  </body>
</html>
